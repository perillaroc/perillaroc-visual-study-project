<!DOCTYPE html>
<html>
<head>
    <title>访问者地域</title>
    <meta charset="utf-8">
</head>
<body>
    <div class="plot_container"></div>
</body>
<script src="js/jquery-2.1.0.js" charset="utf-8"></script>
<script src="js/d3.js" charset="utf-8"></script>
<script src="js/topojson.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        var width =  960;
        var height = 500;

        var svg = d3.select(".plot_container").append("svg")
                .attr("width", width)
                .attr("height", height);

        var projection = d3.geo.mercator()
                .translate([width/2,height/2])
                .center([105, 38])
                .scale([500]);

        var path = d3.geo.path()
                .projection(projection);

        d3.json("data/china.topo.json", function(error, d) {
            var states = topojson.feature(d, d.objects.states);
            svg.append("path")
                    .datum(states)
                    .attr("d", path);
            svg.selectAll("path")
                    .style("stroke-width", "1")
                    .style("stroke", "white");

            svg.selectAll(".states")
                    .data(topojson.feature(d, d.objects.states).features)
                    .enter().append("path")
                    .attr("date-name", function(d) {
                        if(d.id=="TWN")
                            return d.id;
                        else
                            return d.properties.name;
                    })
                    .attr("d", path);
        })
    });

</script>
</html>